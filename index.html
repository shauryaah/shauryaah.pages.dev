<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>shauryaah</title>
        <link rel="stylesheet" href="./assets/css/style.css" type="text/css">
        <style>
            body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            }
            p {
            text-align: center;
            }
        </style>
    </head>
    <body>
        <p>
            <i>shauryaah</i>
            <br><br>
            <img id="album-art" src="album.png" width="300px" height="300px" onerror="this.src='assets/images/yuuki-sakuna.heart.png'">
            <br><br>
            <span id="artist-name"></span> | <span id="song-name"><a href="#" target="_blank"></a></span>
            <br><br>
            <a href="about.html">about</a> 

            <span class="nerd">&#xf004;</span> 

            <a href="socials.html">socials</a> 

            <span class="nerd">&#xf004;</span> 

            <a href="#">blank</a> 

            <span class="nerd">&#xf004;</span> 

            <a href="#">blank</a> 
        </p>
    </body>

    <script>
        async function fetchLastPlayedSong() {
              const url = `https://shauryaah.netlify.app/.netlify/functions/lastfm`;
        
        try {
            const response = await fetch(url);
            const data = await response.json();
            const track = data.recenttracks.track[0];
          
            // Update HTML
            document.getElementById('album-art').src = track.image[3]['#text'] || 'album.png';
            const songNameElement = document.getElementById('song-name').querySelector('a');
            songNameElement.textContent = track.name || 'Unknown Song';
            songNameElement.href = track.url || '#';
          
            document.getElementById('artist-name').textContent = track.artist['#text'] || 'Unknown Artist';
            document.getElementById('album-name').textContent = track.album['#text'] || 'Unknown Album';
            } catch (error) {
                console.error('Error fetching song data:', error);
              }
          }
          
          // Fetch song data on load
          fetchLastPlayedSong();
          
          // Optionally refresh every 60 seconds
          setInterval(fetchLastPlayedSong, 60000);
    </script>
</html>